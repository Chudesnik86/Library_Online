{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Å—Ç–∞–≤–∫–∞–º–∏ - Library Online{% endblock %}

{% block nav %}
<a href="/admin/dashboard">–ü–∞–Ω–µ–ª—å</a>
<a href="/admin/customers">–ß–∏—Ç–∞—Ç–µ–ª–∏</a>
<a href="/admin/books">–ö–Ω–∏–≥–∏</a>
<a href="/admin/authors">–ê–≤—Ç–æ—Ä—ã</a>
<a href="/admin/issues">–í—ã–¥–∞—á–∏</a>
<a href="/admin/exhibitions">–í—ã—Å—Ç–∞–≤–∫–∏</a>
<a href="/admin/reports">–û—Ç—á–µ—Ç—ã</a>
<span style="margin-left: auto; color: white;">üë®‚Äçüíº {{ user_name or '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' }}</span>
<a href="/auth/logout">–í—ã—Ö–æ–¥</a>
{% endblock %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="flex-between">
            <h1 class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Å—Ç–∞–≤–∫–∞–º–∏</h1>
            <button class="btn btn-success" onclick="showAddExhibitionModal()">‚ûï –°–æ–∑–¥–∞—Ç—å –≤—ã—Å—Ç–∞–≤–∫—É</button>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                        <th>–ü–µ—Ä–∏–æ–¥</th>
                        <th>–ö–Ω–∏–≥</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="exhibitions-table">
                    <tr><td colspan="7" class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add/Edit Exhibition Modal -->
<div id="exhibition-modal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <span class="modal-close" onclick="closeExhibitionModal()">&times;</span>
            <h2 class="modal-title" id="exhibition-modal-title">–°–æ–∑–¥–∞—Ç—å –≤—ã—Å—Ç–∞–≤–∫—É</h2>
        </div>
        <form id="exhibition-form">
            <input type="hidden" id="exhibition-id" />
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                <input type="text" class="form-control" id="exhibition-title" required />
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea class="form-control" id="exhibition-description" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                <input type="date" class="form-control" id="exhibition-start-date" />
            </div>
            <div class="form-group">
                <label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                <input type="date" class="form-control" id="exhibition-end-date" />
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="exhibition-is-active" checked />
                    –ê–∫—Ç–∏–≤–Ω–∞
                </label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" onclick="closeExhibitionModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </form>
    </div>
</div>

<!-- Manage Books Modal -->
<div id="books-modal" class="modal">
    <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
        <div class="modal-header">
            <span class="modal-close" onclick="closeBooksModal()">&times;</span>
            <h2 class="modal-title" id="books-modal-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ –≤—ã—Å—Ç–∞–≤–∫–∏</h2>
        </div>
        <div style="margin-bottom: 1rem;">
            <div class="search-bar">
                <input type="text" class="form-control" id="book-search-input" placeholder="–ü–æ–∏—Å–∫ –∫–Ω–∏–≥–∏..." />
                <button class="btn btn-primary" onclick="searchBooksForExhibition()">üîç –ü–æ–∏—Å–∫</button>
            </div>
        </div>
        <div id="book-search-results" style="display: none; margin-bottom: 1rem;">
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</h3>
            <div id="book-search-list" class="book-list"></div>
        </div>
        <div>
            <h3>–ö–Ω–∏–≥–∏ –≤ –≤—ã—Å—Ç–∞–≤–∫–µ (–ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞):</h3>
            <div id="exhibition-books-list" class="book-list sortable-list"></div>
            <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">
                –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –æ—Ç 3 –¥–æ 12 –∫–Ω–∏–≥
            </p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn" onclick="closeBooksModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button type="button" class="btn btn-primary" onclick="saveBookOrder()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫</button>
        </div>
    </div>
</div>

<!-- Preview Modal -->
<div id="preview-modal" class="modal">
    <div class="modal-content" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
        <div class="modal-header">
            <span class="modal-close" onclick="closePreviewModal()">&times;</span>
            <h2 class="modal-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã—Å—Ç–∞–≤–∫–∏</h2>
        </div>
        <div id="preview-content"></div>
        <div class="modal-footer">
            <button type="button" class="btn" onclick="closePreviewModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/admin_exhibitions.js') }}"></script>
{% endblock %}

